{% extends "base.html" %}
{% block title %}Analytics{% endblock %}

{% block content %}
<!-- Analytics stats -->

<div class="container">
    
    <div class="container col-md-3 justify-content-center">
        <form action="{{url_for('login', page=request.args.get('page'))}}">
            <button class="btn btn-info">Back to Class Selection</a>
        </form>
    </div>

    <body>
        <div class='graph'>
            <img src={{url_for('drawbar', classCode=request.args.get('ccode'), Category=request.args.get('category') )}}
                alt="Image Placeholder" width="40%">
            <p>{{display}}</p>
            <div class="row">
                <div class="column">
                    <img src={{url_for('drawtimetoday', classCode=request.args.get('ccode'),
                        Category=request.args.get('category') )}} alt="Image Placeholder" style="width:100%">
                </div>
                <div class="column">
                    <img src={{url_for('drawtimeyest', classCode=request.args.get('ccode'),
                        Category=request.args.get('category') )}} alt="Image Placeholder" style="width:100%">
                </div>
                <div class="column">
                    <img src={{url_for('drawtimeweek', classCode=request.args.get('ccode'),
                        Category=request.args.get('category') )}} alt="Image Placeholder" style="width:100%">
                </div>
            </div>
        </div>
        

      
        
        <!-- Table begins  -->
        <div class="table-responsive">
            <table class="table table-striped  table-hover table-sm" cellspacing="0" width="100%">
                <p class="display-4" style="padding-top: 5%;">Datatable</p>
                {{pagination.links}}
                <thead class="thead-dark lead">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Date</th>
                        <th scope="col">Time</th>
                        <th scope="col">Class Code</th>
                        <th scope="col">Student Code</th>
                        <th scope="col">Emoji</th>
                        <th scope="col">Category</th>
                        <th scope="col">Response</th>
                        <th scope="col">In class?</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in data %}
                    <tr>
                        <th scope="row">{{ loop.index + pagination.skip }}</th>
                        <td>{{row.date}}</td>
                        <td>{{row.time}}</td>
                        <td>{{row.classCode}}</td>
                        <td>{{row.studentCode}}</td>
                        <td>{{row.emoji}}</td>
                        <td>{{row.elaborateNumber}}</td>
                        <td>{{row.elaborateText}}</td>
                        <td>
                            <!-- Conditional rendering of the results -->
                            {% if row.inClass %}
                                <h6><span class="badge badge-success">YES</span></h6>
                            {% else %}
                                <h6><span class="badge badge-danger">NO</span></h6>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

        </div>



    </body>
</div>

{% endblock %}